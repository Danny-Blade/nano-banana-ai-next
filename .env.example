# Google OAuth Configuration
# 获取方法：
# 1. 访问 https://console.cloud.google.com/apis/credentials
# 2. 创建 OAuth 2.0 客户端ID
# 3. 添加授权重定向URI: http://localhost:3000/api/auth/callback/google
GOOGLE_CLIENT_ID=5783249126-pofhal0pprh4dfguso8u5luhov883jdm.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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

# Public Google Client ID (用于前端显示)
NEXT_PUBLIC_GOOGLE_CLIENT_ID=5783249126-pofhal0pprh4dfguso8u5luhov883jdm.apps.googleusercontent.com

# NextAuth Configuration
# 本地开发环境（`yarn dev` 默认端口 3000）
NEXTAUTH_URL=http://localhost:3000
# 如果你用 `wrangler dev` / `opennextjs-cloudflare preview` 且端口不是 3000，
# 需要把 NEXTAUTH_URL 改成实际端口（常见是 8787）。
# NEXTAUTH_URL=http://localhost:8787
# 生产环境需要修改为实际域名（示例：Workers.dev）
# NEXTAUTH_URL=https://nano-banana-ai-next.blusdanny1230.workers.dev

# 生成随机密钥：openssl rand -base64 32
NEXTAUTH_SECRET=ycjQupsOGxVMy0Ro4c8C0gNn3CoTNsZgy3nt6fUnaXI=

# Facebook OAuth Configuration (可选)
FACEBOOK_CLIENT_ID=your-facebook-app-id
FACEBOOK_CLIENT_SECRET=your-facebook-app-secret

# OAuth HTTP Timeout (可选，默认15秒)
# 在网络较慢的环境可以增加此值
OAUTH_HTTP_TIMEOUT_MS=15000

# OAuth Proxy (可选)
# 如果你能在浏览器里打开 Google 登录页，但 /api/auth/callback/google 会在 token 请求阶段超时，
# 通常是 Node 进程没有走代理/VPN（例如只在浏览器插件里设置了代理）。
# 这里支持 HTTP(S) 代理（例如 Clash: http://127.0.0.1:7890）。
# OAUTH_HTTP_PROXY=http://127.0.0.1:7890
# 也兼容读取标准环境变量：HTTPS_PROXY / HTTP_PROXY / ALL_PROXY

# DNS 结果顺序（可选）
# 如果你的网络 IPv6 不通导致偶发连接卡住，可设置为 ipv4first。
# OAUTH_DNS_RESULT_ORDER=ipv4first

# Google id_token 验证模式（可选）
# - remote（默认）：后端通过 Google JWKS 进行签名验证（生产环境必须）
# - skip：仅用于本地 preview/dev 跑通流程（不做签名校验，生产环境会忽略该设置）
# GOOGLE_ID_TOKEN_VERIFY=remote

# Database Configuration (生产环境需要配置)
# DATABASE_URL=your-database-url

# Environment
NODE_ENV=development

# ===== 上游生图（APIYI / Nano Banana）=====
# 注意：这些是服务端环境变量，不要使用 `NEXT_PUBLIC_` 前缀。
# 你可以二选一配置：APIYI_API_KEY 或 NANO_BANANA_API_KEY
APIYI_API_KEY=sk-RGfda14fNnaJDxd0F337F5D44f3e4a6fB1Ac971a3bFcFb0c
# NANO_BANANA_API_KEY=your-apiyi-api-key

# 可选：自定义 APIYI 网关地址（默认 https://api.apiyi.com）
# APIYI_API_BASE_URL=https://api.apiyi.com

# 可选：在 CI/生产部署时强制要求 APIYI key（否则构建不会因缺少 key 失败）
REQUIRE_APIYI_API_KEY=true

# ===== 部署到 Cloudflare Workers/Pages 所需的环境变量 =====

# Cloudflare Workers/Pages 部署配置
# 在 Cloudflare Dashboard → Settings → Environment variables 中配置以下变量：

# 构建环境变量 (Build Variables) - 非敏感信息
# D1_DATABASE_ID=your-d1-database-uuid-here
# 获取方式：Cloudflare 控制台 → D1 → 数据库详情页 → 复制 Database ID
# NEXTAUTH_URL=https://your-domain.workers.dev
# GOOGLE_CLIENT_ID=your-google-client-id-here
# WORKER_NAME=nano-banana-ai-next

# 运行时 Secrets - 敏感信息（在 Secrets 中配置）
# GOOGLE_CLIENT_SECRET=your-google-client-secret-here
# NEXTAUTH_SECRET=your-secret-key-goes-here

# 构建流程说明：
# 1. 本地开发：使用 .env.local 中的所有变量
# 2. 部署时：
#    - 构建环境变量会自动写入 wrangler.jsonc
#    - Secrets 会通过脚本自动同步到 Cloudflare Workers
# 3. 手动 secrets 管理：npm run secrets:sync:prod
